/*! PixiJS TextStyle (Sat, 23 Dec 2017 16:14:48 UTC) */
!function(t){"use strict";function e(t,e){for(var i in e)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}function i(t,e){if(t===e)return!0;if(typeof t!=typeof e||null===t||null===e||"object"!=typeof t||"object"!=typeof e)return!1;var n=0,o=0;for(var s in t)++n;for(var a in e)if(++o,!(a in t&&i(t[a],e[a])))return!1;return n===o}t=t&&t.hasOwnProperty("default")?t.default:t,PIXI.TextStyle.prototype.toJSON=function(){var t={};for(var e in this)if(0===e.indexOf("_")){var i=e.slice(1);t[i]=this[i]}return t};var n=function(t){this.parent=t.attrs.parent,this.id=t.attrs.id,this.name=t.attrs.name};n.prototype.view=function(){return m("div",{class:"row"},m("label",{class:"col-xs-5",for:this.id,title:this.id},this.name),m("div",{class:"col-xs-7"},this.init()))},n.prototype.parse=function(t){var e=this;return Array.isArray(t)?t=t.map(function(t){return e.parse(t)}):/^-?\d+$/.test(t)?t=parseInt(t):/^-?\d*\.\d+$/.test(t)&&(t=parseFloat(t)),t},n.prototype.update=function(t){this.parent.style[this.id]=this.parse(t),this.parent.app.render()},n.prototype.init=function(){throw"override init"};var o=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){var e=this,i=t.withAttr("value",function(t){e.parent.background=t,e.parent.app.render()});return t("input",{class:"form-control input-sm color",type:"color",id:this.id,key:this.id,value:this.parent.background,oninput:i})},i}(n),s=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){return t("input",{type:"checkbox",class:"check",id:this.id,key:this.id,onchange:t.withAttr("checked",this.update,this),checked:this.parent.style[this.id]})},i}(n),a=function(e){function i(t){var i=this;e.call(this,t),this.colorMap={"#000":"black","#fff":"white","#c0c0c0":"silver","#f00":"red","#800000":"maroon","#ff0":"yellow","#808000":"olive","#0f0":"lime","#008000":"green","#0ff":"aqua","#008080":"teal","#00f":"blue","#000080":"navy","#f0f":"fuchsia","#800080":"purple"},this.stringMap={},Object.keys(this.colorMap).forEach(function(t){i.stringMap[i.colorMap[t]]=t})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){var e=this,i=t.withAttr("value",function(t){e.update(e.hexToString(t))});return t("input",{class:"form-control input-sm color color-group",type:"color",id:this.id,key:this.id,oninput:i,value:this.stringToHex(this.parent.style[this.id])})},i.prototype.stringToHex=function(t){var e=this.stringMap[t]||t;return e=e.replace(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/,"#$1$1$2$2$3$3")},i.prototype.hexToString=function(t){var e=t.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3");return this.colorMap[e]||e},i}(n),r=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){var i,n=this,o=this.parent.style[this.id];return i=Array.isArray(o)?o.map(function(e,i){var s=[t("button",{class:"btn btn-sm btn-default",key:n.id+"Remove"+i,onclick:n.removeStop.bind(n,i)},t("span",{class:"glyphicon glyphicon-remove"}))];if(i>0&&s.unshift(t("button",{class:"btn btn-sm btn-default",key:n.id+"Up"+i,onclick:n.moveUpStop.bind(n,i)},t("span",{class:"glyphicon glyphicon-arrow-up"}))),i<o.length-1){var a="btn btn-sm btn-default "+(i===o.length-1?"disabled":"");s.unshift(t("button",{class:a,key:n.id+"Down"+i,disabled:i===o.length-1,onclick:n.moveDownStop.bind(n,i)},t("span",{class:"glyphicon glyphicon-arrow-down"})))}return t("div",{class:"input-group color-group"},t("input",{class:"form-control input-sm color",type:"color",id:n.id+i,key:n.id+i,oninput:t.withAttr("value",n.updateIndex.bind(n,i)),value:n.stringToHex(e)}),t("span",{class:"input-group-btn"},s))}):[e.prototype.init.call(this)],t("div",{class:"gradient"},i,t("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t("span",{class:"glyphicon glyphicon-plus"}),"Add Color"))},i.prototype.moveUpStop=function(t){if(0!==t){var e=this.parent.style[this.id],i=e[t];e[t]=e[t-1],e[t-1]=i,this.update(e)}},i.prototype.moveDownStop=function(t){var e=this.parent.style[this.id];if(t!==e.length-1){var i=e[t];e[t]=e[t+1],e[t+1]=i,this.update(e)}},i.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),1===e.length&&(e=e[0]),this.update(e)},i.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=this.hexToString(e),this.update(this.parent.style[this.id])},i.prototype.addStop=function(){var e=this,i=this.parent.style[this.id];Array.isArray(i)||(i=[i]),i.push("#000000"),i=i.map(function(t){return e.hexToString(t)}),this.update(i),t.redraw()},i}(a),l=function(e){function i(t){e.call(this,t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){return t("input",{class:"form-control input-sm number",type:"number",id:this.id,key:this.id,step:this.step,min:this.min,max:this.max,oninput:t.withAttr("value",this.update,this),value:this.parent.style[this.id]})},i}(n),p=function(e){function i(i){e.call(this,i),this.options=i.attrs.options.map(function(e){var i=e;return Array.isArray(e)&&(i=e[1],e=String(e[0])),t("option",{value:e},i)})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){return t("select",{class:"form-control input-sm",id:this.id,key:this.key,oninput:t.withAttr("value",this.update,this),value:this.parent.style[this.id]},this.options)},i}(n),c=function(e){function i(t){e.call(this,t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.init=function(){var e,i=this,n=this.parent.style[this.id];return e=Array.isArray(n)?n.map(function(e,n){var o=[t("button",{class:"btn btn-sm btn-default",key:i.id+"Remove"+n,onclick:i.removeStop.bind(i,n)},t("span",{class:"glyphicon glyphicon-remove"}))];return t("div",{class:"input-group color-group"},t("input",{class:"form-control input-sm number",type:"number",id:i.id+n,key:i.id+n,oninput:t.withAttr("value",i.updateIndex.bind(i,n)),step:i.step,min:i.min,max:i.max,value:e}),t("span",{class:"input-group-btn"},o))}):[],t("div",{class:"gradient"},e,t("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t("span",{class:"glyphicon glyphicon-plus"}),"Add Stop Point"))},i.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),this.update(e.slice())},i.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=e,this.update(this.parent.style[this.id].slice())},i.prototype.addStop=function(){var e=this.parent.style[this.id];Array.isArray(e)||(e=[e]),e.push(e[e.length-1]||0),this.update(e),t.redraw()},i}(n),d=function(t){this.id="panel-"+t.attrs.id,this.name=t.attrs.name;var e=localStorage[this.id];this.selected=void 0!==e?JSON.parse(e):!!t.attrs.selected};d.prototype.onclick=function(){this.selected=!this.selected,localStorage[this.id]=JSON.stringify(this.selected)},d.prototype.view=function(t){var e=this.selected?"expanded":"collapsed",i=this.selected?"pane visible":"pane hidden";return m("div",null,m("h4",{class:e,onclick:this.onclick.bind(this)},this.name),m("div",{class:i},t.children))};var h=function t(){this.defaults=new PIXI.TextStyle,this.defaultText="Hello World",this.defaultBG="#ffffff",this.style=new PIXI.TextStyle,this.defaults.dropShadowColor="black",this.style.dropShadowColor="black",this.text=new PIXI.Text("",this.style),this.text.anchor.set(.5),this.indent=parseInt(localStorage.indent)||t.INDENT.SPACE_4,this.shortenUrl="";var i={text:localStorage.text||this.defaultText,background:localStorage.background||this.defaultBG,style:JSON.parse(localStorage.style||null)||this.defaults.toJSON()};if(document.location.hash)try{var n=document.location.hash.slice(1);i=Object.assign(i,JSON.parse(decodeURIComponent(n)))}catch(t){}PIXI.utils.skipHello(),this.app=new PIXI.Application({width:400,height:100,roundPixels:!0,resolution:devicePixelRatio}),this.app.renderer.plugins.interaction.autoPreventDefault=!1,e(this.style,i.style),this.text.text=i.text,this.background=i.background,this.app.stage.addChild(this.text),this.app.stop()},u={background:{configurable:!0}};h.prototype.view=function(){var e=this.codeColor.bind(this);return t("div",{oncreate:this.init.bind(this)},t("nav",{class:"controls"},t("div",{class:"container-fluid"},t("h3",{class:"title"},"PixiJS TextStyle ",t("button",{class:"btn btn-primary btn-sm pull-right",onclick:this.reset.bind(this)},t("span",{class:"glyphicon glyphicon-refresh"}))),t(d,{id:"text",name:"Text",selected:"true"},t("textarea",{class:"form-control",id:"input",autofocus:"true",oninput:t.withAttr("value",this.onText.bind(this)),value:this.text.text})),t(d,{id:"font",name:"Font",selected:"true"},t(p,{parent:this,id:"fontFamily",name:"Font Family",options:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Helvetica","Impact","Tahoma","Times New Roman","Verdana","Georgia, serif",'"Palatino Linotype", "Book Antiqua", Palatino, serif','"Times New Roman", Times, serif',"Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Comic Sans MS", cursive, sans-serif',"Impact, Charcoal, sans-serif",'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva, sans-serif",'"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif",'"Courier New", Courier, monospace','"Lucida Console", Monaco, monospace']}),t(l,{parent:this,id:"fontSize",name:"Font Size",step:"1",min:"1"}),t(p,{parent:this,id:"fontStyle",name:"Font Style",options:["normal","italic","oblique"]}),t(p,{parent:this,id:"fontVariant",name:"Font Variant",options:["normal","small-caps"]}),t(p,{parent:this,id:"fontWeight",name:"Font Weight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]})),t(d,{id:"fill",name:"Fill"},t(r,{parent:this,id:"fill",name:"Color"}),t(p,{parent:this,id:"fillGradientType",name:"Gradient Type",options:[[0,"linear vertical"],[1,"linear horizontal"]]}),t(c,{parent:this,id:"fillGradientStops",name:"Fill Gradient Stops",step:"0.1",min:"0",max:"1"})),t(d,{id:"stroke",name:"Stroke"},t(a,{parent:this,id:"stroke",name:"Color"}),t(l,{parent:this,id:"strokeThickness",name:"Thickness",step:"1",min:"0"}),t(p,{parent:this,id:"lineJoin",name:"Line Join",options:["miter","round","bevel"]}),t(l,{parent:this,id:"miterLimit",name:"Miter Limit",step:"1",min:"0"})),t(d,{id:"layout",name:"Layout"},t(l,{parent:this,id:"letterSpacing",name:"Letter Spacing"}),t(p,{parent:this,id:"textBaseline",name:"Text Baseline",options:["alphabetic","bottom","middle","top","hanging"]})),t(d,{id:"shadow",name:"Drop Shadow"},t(s,{parent:this,id:"dropShadow",name:"Enable"}),t(a,{parent:this,id:"dropShadowColor",name:"Color"}),t(l,{parent:this,id:"dropShadowAlpha",name:"Alpha",step:"0.1",min:"0",max:"1"}),t(l,{parent:this,id:"dropShadowAngle",name:"Angle",step:"0.1"}),t(l,{parent:this,id:"dropShadowBlur",name:"Blur"}),t(l,{parent:this,id:"dropShadowDistance",name:"Distance"})),t(d,{id:"multiline",name:"Multiline"},t(s,{parent:this,id:"wordWrap",name:"Enable"}),t(s,{parent:this,id:"breakWords",name:"Break Words"}),t(p,{parent:this,id:"align",name:"Align",options:["left","center","right"]}),t(l,{parent:this,id:"wordWrapWidth",name:"Wrap Width",step:"10",min:"0"}),t(l,{parent:this,id:"lineHeight",name:"Line Height",step:"1",min:"0"})),t(d,{id:"texture",name:"Texture"},t(l,{parent:this,id:"padding",name:"Padding"}),t(s,{parent:this,id:"trim",name:"Trim"})),t(d,{id:"background",name:"Background"},t(o,{parent:this,id:"backgroundColor",name:"Color"})))),t("main",{class:"main"},t("div",{class:"col-sm-12"},t("h3",null,t("span",{class:"glyphicon glyphicon-eye-open"}),"Preview ",t("small",null,"PixiJS v",PIXI.VERSION)),t("div",{class:"renderer",id:"renderer"})),t("div",{class:"col-sm-6"},t("h3",null,t("span",{class:"glyphicon glyphicon-scissors"})," JavaScript"),t("pre",{class:"code-display hljs"},t("code",{class:"javascript",onupdate:e,oncreate:e,innerHTML:this.getCode()}))),t("div",{class:"col-sm-6"},t("h3",null,t("span",{clasName:"glyphicon glyphicon-scissors"})," JSON ",t("span",{class:"btn-group pull-right"},t("button",{class:"btn btn-primary btn-sm",onclick:this.onSave.bind(this)},t("span",{class:"glyphicon glyphicon-save"})," Save"),t("button",{class:"btn btn-primary btn-sm btn-file"},t("span",{class:"glyphicon glyphicon-open"}),t("input",{type:"file",onchange:this.onLoad.bind(this)})," Load"))),t("pre",{class:"code-display hljs"},t("code",{class:"json",onupdate:e,oncreate:e,innerHTML:this.getCode(!0)}))),t("div",{class:"col-sm-12"},t("h3",null,t("span",{class:"glyphicon glyphicon-cog"})," Options"),t("div",{class:"well"},t("div",{class:"row config"},t("label",{class:"col-md-2 col-sm-3"},t("span",{class:"glyphicon glyphicon-indent-left"}),t("span",{class:"name"},"Indent")),t("div",{class:"col-md-10 col-sm-9"},t("select",{class:"form-control input-sm",onchange:this.onFormat.bind(this),value:this.indent},t("option",{value:h.INDENT.SPACE_4},"4 Spaces"),t("option",{value:h.INDENT.SPACE_3},"3 Spaces"),t("option",{value:h.INDENT.SPACE_2},"2 Spaces"),t("option",{value:h.INDENT.TAB},"Tab"),t("option",{value:h.INDENT.NONE},"No indent"),t("option",{value:h.INDENT.NONE_PRETTY},"No indent (with spaces)")))),t("div",{class:"row config"},t("label",{class:"col-md-2 col-sm-3"},t("span",{class:"glyphicon glyphicon-share"}),t("span",{class:"name"},"Share")),t("div",{class:"col-md-10 col-sm-9"},t("div",{class:"input-group"},t("span",{class:"input-group-btn"},t("button",{class:"btn btn-sm btn-primary",onclick:this.onShorten.bind(this)},"Shorten URL")),t("input",{class:"form-control input-sm",type:"text",value:this.shortenUrl})))))),t("div",{class:"col-sm-12"},t("h3",null,t("span",{class:"glyphicon glyphicon-book"})," Documentation"),t("ul",null,t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.TextStyle.html"},"PIXI.TextStyle")),t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.Text.html"},"PIXI.Text")),t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.TextMetrics.html"},"PIXI.TextMetrics"))))))},h.prototype.onFormat=function(e){this.indent=parseInt(e.target.value),localStorage.indent=this.indent,t.redraw()},h.prototype.onLoad=function(i){var n=this,o=i.target;if(1===o.files.length)if(/\.json$/.test(o.files[0].name)){var s=new FileReader;s.onload=function(){try{var i=JSON.parse(s.result);e(n.style,n.defaults.toJSON()),e(n.style,i),t.redraw(),n.app.render()}catch(t){alert("Unable to parse JSON file")}},s.readAsText(o.files[0]),i.target.value=""}else alert("Unable to load, must be a JSON file.")},h.prototype.onSave=function(){var t=this.style.toJSON();for(var e in t)i(t[e],this.defaults[e])&&delete t[e];var n=JSON.stringify(t,null,this.getIndent()),o=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(o,"style.json")},h.prototype.onShorten=function(){var e=this;t.request({method:"POST",url:"https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyCc-YIpSnyqr3RQcBN8-s-8u8DRXGECon0",data:{longUrl:document.location.href}}).then(function(t){e.shortenUrl=t.id})},h.prototype.reset=function(){confirm("Are you sure you want to remove all your saved styles?")&&(localStorage.removeItem("background"),localStorage.removeItem("style"),localStorage.removeItem("text"),e(this.style,this.defaults.toJSON()),this.text.text=this.defaultText,this.background=this.defaultBG,t.redraw(),this.app.render())},u.background.set=function(t){localStorage.setItem("background",t),this.app.renderer.backgroundColor=parseInt(t.slice(1),16)},u.background.get=function(){var t=this.app.renderer.backgroundColor.toString(16);return"#"+"0".repeat(6-t.length)+t},h.prototype.resize=function(){var t=this.app.view,e=t.parentNode.clientWidth,i=t.parentNode.clientHeight;this.app.renderer.resize(e,i),this.text.x=e/2,this.text.y=i/2,this.app.render()},h.prototype.codeColor=function(t){hljs.highlightBlock(t.dom)},h.prototype.getIndent=function(){var t;switch(this.indent){case h.INDENT.SPACE_4:t="    ";break;case h.INDENT.SPACE_3:t="   ";break;case h.INDENT.SPACE_2:t="  ";break;case h.INDENT.TAB:t="\t";break;default:t=""}return t},h.prototype.getCode=function(t){var e=this.style.toJSON();for(var n in e)i(e[n],this.defaults[n])&&delete e[n];var o=this.getIndent(),s=h.INDENT.NONE_PRETTY===this.indent,a=JSON.stringify(e,null,o);if(t)return s?this.prettify(a):a;var r=JSON.stringify(e);localStorage.setItem("style",r);var l={};"{}"!==r&&(l.style=e),this.defaultText!==this.text.text&&(l.text=this.text.text),this.defaultBG!==this.background&&(l.background=this.background);var p=Object.keys(l).length?encodeURIComponent(JSON.stringify(l)):"";history.replaceState(null,null,"#"+p),"{}"===a?a="":(a=a.replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/'/g,'"'),s&&(a=this.prettify(a)));return"const style = new PIXI.TextStyle("+a+");\nconst text = new PIXI.Text('"+this.text.text.replace(/\n/g,"\\n").replace(/'/g,"\\'")+"', style);"},h.prototype.prettify=function(t){return t.replace(/([{:,])/g,"$1 ").replace(/}$/," }")},h.prototype.onText=function(t){localStorage.setItem("text",t),this.text.text=t,this.app.render()},h.prototype.init=function(){document.getElementById("renderer").appendChild(this.app.view),this.app.render(),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)},Object.defineProperties(h.prototype,u),h.INDENT={NONE:1,NONE_PRETTY:2,TAB:3,SPACE_4:4,SPACE_3:5,SPACE_2:6},window.addEventListener("load",function(){t.mount(document.body,h)})}(m);
