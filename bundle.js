/*! PixiJS TextStyle (Tue, 28 Nov 2017 02:44:41 UTC) */
!function(){"use strict";function t(t,e){for(var n in e)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}function e(t,n){if(t===n)return!0;if(typeof t!=typeof n||null===t||null===n||"object"!=typeof t||"object"!=typeof n)return!1;var i=0,o=0;for(var r in t)++i;for(var a in n)if(++o,!(a in t&&e(t[a],n[a])))return!1;return i===o}PIXI.TextStyle.prototype.toJSON=function(){var t={};for(var e in this)if(0===e.indexOf("_")){var n=e.slice(1);t[n]=this[n]}return t};var n=function(t){this.parent=t.attrs.parent,this.id=t.attrs.id,this.name=t.attrs.name};n.prototype.view=function(){var t=this.id;return m("div.row",[m("label.col-xs-5",{for:t,title:t},this.name),m("div.col-xs-7",[this.init()])])},n.prototype.parse=function(t){var e=this;return Array.isArray(t)?t=t.map(function(t){return e.parse(t)}):/^-?\d+$/.test(t)?t=parseInt(t):/^-?\d*\.\d+$/.test(t)&&(t=parseFloat(t)),t},n.prototype.update=function(t){this.parent.style[this.id]=this.parse(t),this.parent.app.render()},n.prototype.init=function(){throw"override init"};var i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){var t=this;return m("input.form-control.input-sm.color[type=color]#"+this.id,{key:this.id,oninput:m.withAttr("value",function(e){t.parent.background=e,t.parent.app.render()}),value:this.parent.background})},e}(n),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){return m("input.check[type=checkbox]#"+this.id,{key:this.id,onchange:m.withAttr("checked",this.update,this),checked:this.parent.style[this.id]})},e}(n),r=function(t){function e(e){var n=this;t.call(this,e),this.colorMap={"#000":"black","#fff":"white","#c0c0c0":"silver","#f00":"red","#800000":"maroon","#ff0":"yellow","#808000":"olive","#0f0":"lime","#008000":"green","#0ff":"aqua","#008080":"teal","#00f":"blue","#000080":"navy","#f0f":"fuchsia","#800080":"purple"},this.stringMap={},Object.keys(this.colorMap).forEach(function(t){n.stringMap[n.colorMap[t]]=t})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){var t=this;return m("input.form-control.input-sm.color.color-group[type=color]#"+this.id,{key:this.id,oninput:m.withAttr("value",function(e){t.update(t.hexToString(e))}),value:this.stringToHex(this.parent.style[this.id])})},e.prototype.stringToHex=function(t){var e=this.stringMap[t]||t;return e=e.replace(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/,"#$1$1$2$2$3$3")},e.prototype.hexToString=function(t){var e=t.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3");return this.colorMap[e]||e},e}(n),a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){var e,n=this,i=this.parent.style[this.id];return e=Array.isArray(i)?i.map(function(t,e){var o=[m("button.btn.btn-sm.btn-default",{key:n.id+"Remove"+e,onclick:n.removeStop.bind(n,e)},m("span.glyphicon.glyphicon-remove"))];return e>0&&o.unshift(m("button.btn.btn-sm.btn-default",{key:n.id+"Up"+e,onclick:n.moveUpStop.bind(n,e)},m("span.glyphicon.glyphicon-arrow-up"))),e<i.length-1&&o.unshift(m("button.btn.btn-sm.btn-default",{key:n.id+"Down"+e,class:e===i.length-1?"disabled":"",disabled:e===i.length-1,onclick:n.moveDownStop.bind(n,e)},m("span.glyphicon.glyphicon-arrow-down"))),m("div.input-group.color-group",[m("input.form-control.input-sm.color[type=color]#"+n.id+e,{key:n.id+e,oninput:m.withAttr("value",n.updateIndex.bind(n,e)),value:n.stringToHex(t)}),m("span.input-group-btn",o)])}):[t.prototype.init.call(this)],m("div.gradient",e.concat([m("button.btn-block.btn.btn-sm.btn-default",{key:this.id+"Add",onclick:this.addStop.bind(this)},[m("span.glyphicon.glyphicon-plus")," Add Color"])]))},e.prototype.moveUpStop=function(t){if(0!==t){var e=this.parent.style[this.id],n=e[t];e[t]=e[t-1],e[t-1]=n,this.update(e)}},e.prototype.moveDownStop=function(t){var e=this.parent.style[this.id];if(t!==e.length-1){var n=e[t];e[t]=e[t+1],e[t+1]=n,this.update(e)}},e.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),1===e.length&&(e=e[0]),this.update(e)},e.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=this.hexToString(e),this.update(this.parent.style[this.id])},e.prototype.addStop=function(){var t=this,e=this.parent.style[this.id];Array.isArray(e)||(e=[e]),e.push("#000000"),e=e.map(function(e){return t.hexToString(e)}),this.update(e),m.redraw()},e}(r),s=function(t){function e(e){t.call(this,e),this.step=e.attrs.step||1,this.min=e.attrs.min,this.max=e.attrs.max}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){return m("input.form-control.input-sm.number[type=number]#"+this.id,{key:this.id,step:this.step,min:this.min,max:this.max,oninput:m.withAttr("value",this.update,this),value:this.parent.style[this.id]})},e}(n),p=function(t){function e(e){t.call(this,e),this.options=e.attrs.options.map(function(t){var e=t;return Array.isArray(t)&&(e=t[1],t=String(t[0])),m("option",{value:t},e)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){return m("select.form-control.input-sm#"+this.id,{key:this.id,oninput:m.withAttr("value",this.update,this),value:this.parent.style[this.id]},this.options)},e}(n),l=function(t){function e(e){t.call(this,e),this.step=e.attrs.step||1,this.min=e.attrs.min,this.max=e.attrs.max}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){var t,e=this,n=this.parent.style[this.id];return t=Array.isArray(n)?n.map(function(t,n){var i=[m("button.btn.btn-sm.btn-default",{key:e.id+"Remove"+n,onclick:e.removeStop.bind(e,n)},m("span.glyphicon.glyphicon-remove"))];return m("div.input-group.color-group",[m("input.form-control.input-sm.number[type=number]#"+e.id+n,{key:e.id+n,oninput:m.withAttr("value",e.updateIndex.bind(e,n)),step:e.step,min:e.min,max:e.max,value:t}),m("span.input-group-btn",i)])}):[],m("div.gradient",t.concat([m("button.btn-block.btn.btn-sm.btn-default",{key:this.id+"Add",onclick:this.addStop.bind(this)},[m("span.glyphicon.glyphicon-plus")," Add Stop Point"])]))},e.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),this.update(e.slice())},e.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=e,this.update(this.parent.style[this.id].slice())},e.prototype.addStop=function(){var t=this.parent.style[this.id];Array.isArray(t)||(t=[t]),t.push(t[t.length-1]||0),this.update(t),m.redraw()},e}(n),c=function e(){this.defaults=new PIXI.TextStyle,this.defaultText="Hello World",this.defaultBG="#ffffff",this.style=new PIXI.TextStyle,this.defaults.dropShadowColor="black",this.style.dropShadowColor="black",this.text=new PIXI.Text("",this.style),this.text.anchor.set(.5),this.indent=parseInt(localStorage.indent)||e.INDENT.SPACE_4,this.shortenUrl="",this.panels=localStorage.panels?JSON.parse(localStorage.panels):{text:!0,font:!0,fill:!1,stroke:!1,layout:!1,shadow:!1,multiline:!1,texture:!1,background:!1};var n={text:localStorage.text||this.defaultText,background:localStorage.background||this.defaultBG,style:JSON.parse(localStorage.style||null)||this.defaults.toJSON()};if(document.location.hash)try{var i=document.location.hash.slice(1);n=Object.assign(n,JSON.parse(decodeURIComponent(i)))}catch(t){}PIXI.utils.skipHello(),this.app=new PIXI.Application({width:400,height:100,roundPixels:!0,resolution:devicePixelRatio}),this.app.renderer.plugins.interaction.autoPreventDefault=!1,t(this.style,n.style),this.text.text=n.text,this.background=n.background,this.app.stage.addChild(this.text),this.app.stop()},h={background:{configurable:!0}};c.prototype.onPanel=function(t){this.panels[t]=!this.panels[t],localStorage.panels=JSON.stringify(this.panels)},c.prototype.view=function(){var t=this,e=this.init.bind(this),n=this.onText.bind(this),o=this.codeColor.bind(this),r=this.reset.bind(this),a=this.onFormat.bind(this),s=this.onShorten.bind(this),p=function(e){return{class:t.panels[e]?"visible":"hidden"}},l=function(e){return{onclick:t.onPanel.bind(t,e),class:t.panels[e]?"expanded":"collapsed"}};return m("div",{oncreate:e},[m("nav.controls",[m("div.container-fluid",[m("h3.title",["PixiJS TextStyle",m("button.btn.btn-primary.btn-sm.pull-right",{onclick:r},[m("span.glyphicon.glyphicon-refresh")," Reset"])]),m("h4",l("text"),"Text"),m("div.pane.row",p("text"),[m("div.col-sm-12",[m("textarea.form-control#input",{autofocus:!0,oninput:m.withAttr("value",n),value:this.text.text})])]),m("h4",l("font"),"Font"),m("div.pane",p("font"),[this.select("fontFamily","Font Family",["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Helvetica","Impact","Tahoma","Times New Roman","Verdana","Georgia, serif",'"Palatino Linotype", "Book Antiqua", Palatino, serif','"Times New Roman", Times, serif',"Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Comic Sans MS", cursive, sans-serif',"Impact, Charcoal, sans-serif",'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva, sans-serif",'"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif",'"Courier New", Courier, monospace','"Lucida Console", Monaco, monospace']),this.number("fontSize","Font Size",1,1),this.select("fontStyle","Font Style",["normal","italic","oblique"]),this.select("fontVariant","Font Variant",["normal","small-caps"]),this.select("fontWeight","Font Weight",["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"])]),m("h4",l("fill"),"Fill"),m("div.pane",p("fill"),[this.gradient("fill","Color"),this.select("fillGradientType","Gradient Type",[[0,"linear vertical"],[1,"linear horizontal"]]),this.stopPoints("fillGradientStops","Fill Gradient Stops",.1,0,1)]),m("h4",l("stroke"),"Stroke"),m("div.pane",p("stroke"),[this.color("stroke","Color"),this.number("strokeThickness","Thickness",1,0),this.select("lineJoin","Line Join",["miter","round","bevel"]),this.number("miterLimit","Miter Limit",1,0)]),m("h4",l("layout"),"Layout"),m("div.pane",p("layout"),[this.number("letterSpacing","Letter Spacing"),this.select("textBaseline","Text Baseline",["alphabetic","bottom","middle","top","hanging"])]),m("h4",l("shadow"),"Drop Shadow"),m("div.pane",p("shadow"),[this.checkbox("dropShadow","Enable"),this.color("dropShadowColor","Color"),this.number("dropShadowAlpha","Alpha",.1,0,1),this.number("dropShadowAngle","Angle",.1),this.number("dropShadowBlur","Blur"),this.number("dropShadowDistance","Distance")]),m("h4",l("multiline"),"Multiline"),m("div.pane",p("multiline"),[this.checkbox("wordWrap","Enable"),this.checkbox("breakWords","Break Words"),this.select("align","Align",["left","center","right"]),this.number("wordWrapWidth","Wrap Width",10,0),this.number("lineHeight","Line Height",1,0)]),m("h4",l("texture"),"Texture"),m("div.pane",p("texture"),[this.number("padding","Padding"),this.checkbox("trim","Trim")]),m("h4",l("background"),"Background"),m("div.pane",p("background"),[m(i,{parent:this,id:"backgroundColor",name:"Color"})])])]),m("main.main",[m("div.col-sm-12",[m("h3",[m("span.glyphicon.glyphicon-eye-open"),m("span","Preview"),m("small"," PixiJS v"+PIXI.VERSION)]),m("div.renderer#renderer")]),m("div.col-sm-6",[m("h3",[m("span.glyphicon.glyphicon-scissors"),m("span","JavaScript")]),m("pre.code-display.hljs",[m("code.javascript",{onupdate:o,oncreate:o,innerHTML:this.getCode()})])]),m("div.col-sm-6",[m("h3",[m("span.glyphicon.glyphicon-scissors"),m("span","JSON"),m("span.btn-group.pull-right",[m("button.btn.btn-primary.btn-sm",{onclick:this.onSave.bind(this)},[m("span.glyphicon.glyphicon-save"),m("span","Save")]),m("span.btn.btn-primary.btn-sm.btn-file",[m("span.glyphicon.glyphicon-open"),m("span","Load"),m("input",{type:"file",onchange:this.onLoad.bind(this)})])])]),m("pre.code-display.hljs",[m("code.json",{onupdate:o,oncreate:o,innerHTML:this.getCode(!0)})])]),m("div.col-sm-12",[m("h3",[m("span.glyphicon.glyphicon-cog"),m("span","Options")]),m("div.well",[m("div.row.config",[m("label.col-md-2.col-sm-3",[m("span.glyphicon.glyphicon-indent-left"),m("span.name","Indent")]),m("div.col-md-10.col-sm-9",[m("select.form-control.input-sm",{onchange:a,value:this.indent},[m("option",{value:c.INDENT.SPACE_4},"4 Spaces"),m("option",{value:c.INDENT.SPACE_3},"3 Spaces"),m("option",{value:c.INDENT.SPACE_2},"2 Spaces"),m("option",{value:c.INDENT.TAB},"Tab"),m("option",{value:c.INDENT.NONE},"No indent"),m("option",{value:c.INDENT.NONE_PRETTY},"No indent (with spaces)")])])]),m("div.row.config",[m("label.col-md-2.col-sm-3",[m("span.glyphicon.glyphicon-share"),m("span.name","Share")]),m("div.col-md-10.col-sm-9",[m("div.input-group",[m("span.input-group-btn",[m("button.btn.btn-sm.btn-primary",{onclick:s},"Shorten URL")]),m("input.form-control.input-sm",{type:"text",value:this.shortenUrl})])])])])]),m("div.col-sm-12",[m("h3",[m("span.glyphicon.glyphicon-book"),m("span","Documentation")]),m("ul",[m("li",[m("a",{href:"//pixijs.download/release/docs/PIXI.TextStyle.html"},"PIXI.TextStyle")]),m("li",[m("a",{href:"//pixijs.download/release/docs/PIXI.Text.html"},"PIXI.Text")]),m("li",[m("a",{href:"//pixijs.download/release/docs/PIXI.TextMetrics.html"},"PIXI.TextMetrics")])])])])])},c.prototype.select=function(t,e,n){return m(p,{parent:this,id:t,name:e,options:n})},c.prototype.number=function(t,e,n,i,o){return m(s,{parent:this,id:t,name:e,step:n,min:i,max:o})},c.prototype.stopPoints=function(t,e,n,i,o){return m(l,{parent:this,id:t,name:e,step:n,min:i,max:o})},c.prototype.checkbox=function(t,e){return m(o,{parent:this,id:t,name:e})},c.prototype.color=function(t,e){return m(r,{parent:this,id:t,name:e})},c.prototype.gradient=function(t,e){return m(a,{parent:this,id:t,name:e})},c.prototype.onFormat=function(t){this.indent=parseInt(t.target.value),localStorage.indent=this.indent,m.redraw()},c.prototype.onLoad=function(e){var n=this,i=e.target;if(1===i.files.length)if(/\.json$/.test(i.files[0].name)){var o=new FileReader;o.onload=function(){try{var e=JSON.parse(o.result);t(n.style,n.defaults.toJSON()),t(n.style,e),m.redraw(),n.app.render()}catch(t){alert("Unable to parse JSON file")}},o.readAsText(i.files[0])}else alert("Unable to load, must be a JSON file.")},c.prototype.onSave=function(){var t=this.style.toJSON();for(var n in t)e(t[n],this.defaults[n])&&delete t[n];var i=JSON.stringify(t,null,this.getIndent()),o=new Blob([i],{type:"text/plain;charset=utf-8"});saveAs(o,"style.json")},c.prototype.onShorten=function(){var t=this;m.request({method:"POST",url:"https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyCc-YIpSnyqr3RQcBN8-s-8u8DRXGECon0",data:{longUrl:document.location.href}}).then(function(e){t.shortenUrl=e.id})},c.prototype.reset=function(){confirm("Are you sure you want to remove all your saved styles?")&&(localStorage.removeItem("background"),localStorage.removeItem("style"),localStorage.removeItem("text"),t(this.style,this.defaults.toJSON()),this.text.text=this.defaultText,this.background=this.defaultBG,m.redraw(),this.app.render())},h.background.set=function(t){localStorage.setItem("background",t),this.app.renderer.backgroundColor=parseInt(t.slice(1),16)},h.background.get=function(){var t=this.app.renderer.backgroundColor.toString(16);return"#"+"0".repeat(6-t.length)+t},c.prototype.resize=function(){var t=this.app.view,e=t.parentNode.clientWidth,n=t.parentNode.clientHeight;this.app.renderer.resize(e,n),this.text.x=e/2,this.text.y=n/2,this.app.render()},c.prototype.codeColor=function(t){hljs.highlightBlock(t.dom)},c.prototype.getIndent=function(){var t;switch(this.indent){case c.INDENT.SPACE_4:t="    ";break;case c.INDENT.SPACE_3:t="   ";break;case c.INDENT.SPACE_2:t="  ";break;case c.INDENT.TAB:t="\t";break;default:t=""}return t},c.prototype.getCode=function(t){var n=this.style.toJSON();for(var i in n)e(n[i],this.defaults[i])&&delete n[i];var o=this.getIndent(),r=c.INDENT.NONE_PRETTY===this.indent,a=JSON.stringify(n,null,o);if(t)return r?this.prettify(a):a;var s=JSON.stringify(n);localStorage.setItem("style",s);var p={};"{}"!==s&&(p.style=n),this.defaultText!==this.text.text&&(p.text=this.text.text),this.defaultBG!==this.background&&(p.background=this.background);var l=Object.keys(p).length?encodeURIComponent(JSON.stringify(p)):"";history.replaceState(null,null,"#"+l),"{}"===a?a="":(a=a.replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/'/g,'"'),r&&(a=this.prettify(a)));return"const style = new PIXI.TextStyle("+a+");\nconst text = new PIXI.Text('"+this.text.text.replace(/\n/g,"\\n").replace(/'/g,"\\'")+"', style);"},c.prototype.prettify=function(t){return t.replace(/([{:,])/g,"$1 ").replace(/}$/," }")},c.prototype.onText=function(t){localStorage.setItem("text",t),this.text.text=t,this.app.render()},c.prototype.init=function(){document.getElementById("renderer").appendChild(this.app.view),this.app.render(),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)},Object.defineProperties(c.prototype,h),c.INDENT={NONE:1,NONE_PRETTY:2,TAB:3,SPACE_4:4,SPACE_3:5,SPACE_2:6},window.addEventListener("load",function(){m.mount(document.body,c)})}();
